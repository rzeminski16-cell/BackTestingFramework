"""
Vulnerability Score Modeler & Optimizer Module.

A post-backtest analysis tool that:
- Takes completed backtest results (trades with entry/exit data)
- Re-evaluates each trade's lifetime with a modular, parameterizable vulnerability scoring function
- Simulates daily buy signals and tests whether trades would be replaced
- Measures the P/L impact of vulnerability-based exits vs. natural exits
- Provides interactive visualization and parameter tuning to optimize the scoring logic

Key Insight: The backtest runs *once*. All analysis is computational
(no additional data downloads or re-backtesting).

New Features:
- Multi-backtest loading: Load and combine trades from multiple backtests
- Custom optimization objectives: Define what "optimal" means for your strategy
- Custom presets: Create, save, and manage your own parameter presets
- Sensitivity analysis: See how parameter changes affect results
- Walk-forward validation: Test parameter robustness over time
- Feature importance: Understand which features matter most
- Monte Carlo analysis: Get confidence intervals on results
- Trade grouping: Analyze by symbol, time period, duration, etc.
"""

from .features import (
    FeatureCalculator,
    FeatureWeight,
    FeatureResult,
    FeatureError,
    FeatureDefinition,
    AVAILABLE_FEATURES,
    DEFAULT_FEATURE_WEIGHTS
)
from .scoring import (
    VulnerabilityScoreParams,
    VulnerabilityScoringEngine,
    DailyVulnerabilityRecord,
    PresetManager,
    VULNERABILITY_SCORE_PRESETS
)
from .simulator import (
    SignalInjector,
    SwapSimulator,
    SwapEvent,
    SimulationResult
)
from .analyzer import (
    TradeVulnerabilityAnalysis,
    VulnerabilityAnalysisReport,
    VulnerabilityAnalyzer,
    OptimizationObjective,
    CustomObjective,
    OBJECTIVE_PRESETS,
    get_objective_scorer
)
from .loader import (
    BacktestTradeLoader,
    EnrichedTrade,
    DataAvailabilityReport
)

__all__ = [
    # Features
    'FeatureCalculator',
    'FeatureWeight',
    'FeatureResult',
    'FeatureError',
    'FeatureDefinition',
    'AVAILABLE_FEATURES',
    'DEFAULT_FEATURE_WEIGHTS',
    # Scoring & Presets
    'VulnerabilityScoreParams',
    'VulnerabilityScoringEngine',
    'DailyVulnerabilityRecord',
    'PresetManager',
    'VULNERABILITY_SCORE_PRESETS',
    # Simulator
    'SignalInjector',
    'SwapSimulator',
    'SwapEvent',
    'SimulationResult',
    # Analyzer & Optimization
    'TradeVulnerabilityAnalysis',
    'VulnerabilityAnalysisReport',
    'VulnerabilityAnalyzer',
    'OptimizationObjective',
    'CustomObjective',
    'OBJECTIVE_PRESETS',
    'get_objective_scorer',
    # Loader
    'BacktestTradeLoader',
    'EnrichedTrade',
    'DataAvailabilityReport',
]
